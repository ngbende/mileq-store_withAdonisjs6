<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Accueil ‚Äî Mileq Store</title>
  
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Meta pour SEO -->
  <meta name="description" content="D√©couvrez nos meilleurs produits phares du moment">
  
  <style>
    /* Custom styles pour mobile-first */
    .aspect-video {
      aspect-ratio: 16 / 9;
    }
    @media (min-width: 640px) {
      .aspect-video {
        aspect-ratio: 4 / 3;
      }
    }
  </style>
</head>

<body class="bg-gray-50 text-gray-800 min-h-screen flex flex-col">

  <!-- HEADER -->
  <header class="bg-white shadow sticky top-0 z-20">
    <div class="max-w-7xl mx-auto flex items-center justify-between p-4 px-6">
      <h1 class="text-lg sm:text-2xl font-bold text-gray-800">
        <a href="/" class="hover:text-blue-600 transition">Mileq Store</a>
      </h1>

      <nav>
        <a 
          href="/login" 
          class="text-blue-600 font-semibold hover:text-blue-800 transition text-sm sm:text-base"
        >
          Espace Admin
        </a>
      </nav>
    </div>
  </header>

  <!-- HERO SECTION -->
  <section class="px-4 mt-6 sm:mt-8">
    <div class="max-w-4xl mx-auto text-center">
      <h1 class="text-2xl sm:text-4xl font-extrabold mb-2 sm:mb-3">
        Produits phares üî•
      </h1>

      <p class="text-gray-600 text-sm sm:text-lg">
        D√©couvrez tous nos meilleurs produits disponibles en stock.
      </p>
    </div>
  </section>

  <!-- GRID PRODUITS -->
  <main class="mt-8 sm:mt-10 px-4 flex-grow">
    @if(products && products.length > 0)
      <div class="max-w-7xl mx-auto">
        <!-- Compteur de produits -->
        <p class="text-gray-500 text-sm mb-4 sm:mb-6">
          {{ products.length }} produit{{ products.length > 1 ? 's' : '' }} disponible{{ products.length > 1 ? 's' : '' }}
        </p>
        
        <!-- Grille responsive -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6">
          @each(product in products)
            <article class="bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow duration-300 overflow-hidden flex flex-col h-full border border-gray-100">
              
              <!-- MEDIA CONTAINER -->
              <div class="relative pt-[75%] sm:pt-[65%] bg-gray-50 overflow-hidden">
                @if(product.mainMediaUrl)
                  @if(product.mainMediaType === 'video')
                    <video 
                      src="{{ product.mainMediaUrl }}" 
                      alt="{{ product.name }}"
                      class="absolute inset-0 w-full h-full object-cover"
                      preload="metadata"
                      controls
                    ></video>
                  @else
                    <img 
                      src="{{ product.mainMediaUrl }}" 
                      alt="{{ product.name }}" 
                      class="absolute inset-0 w-full h-full object-cover"
                      loading="lazy"
                      sizes="(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 25vw"
                    >
                  @endif
                @else
                  <div class="absolute inset-0 flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200">
                    <span class="text-gray-400 text-sm">Pas de m√©dia</span>
                  </div>
                @endif
                
                <!-- Badge Nouveau (optionnel) -->
                <div class="absolute top-2 left-2 bg-blue-600 text-white text-xs px-2 py-1 rounded">
                  Nouveau
                </div>
              </div>

              <!-- CONTENU -->
              <div class="p-4 sm:p-5 flex-grow flex flex-col">
                <!-- Nom et description -->
                <h2 class="text-base sm:text-lg font-semibold mb-2 text-gray-800 line-clamp-1">
                  {{ product.name }}
                </h2>
                
                <p class="text-gray-600 text-xs sm:text-sm mb-3 sm:mb-4 flex-grow line-clamp-2">
                  {{ product.description }}
                </p>

                <!-- Prix -->
                <div class="mb-4 sm:mb-5">
                  @if(product.price)
                    <div class="flex items-center gap-2">
                      <span class="text-lg sm:text-xl font-bold text-blue-600">
                        {{ product.price.toFixed(2) }}$ CAD
                      </span>
                    </div>
                  @else
                    <span class="text-gray-500 italic text-sm">
                      Prix sur demande
                    </span>
                  @endif
                </div>

                <!-- Bouton CTA -->
                <a 
                  href="#"
                  class="block w-full bg-blue-600 hover:bg-blue-700 text-white text-center py-2 sm:py-3 rounded-lg transition-colors duration-300 font-medium text-sm sm:text-base"
                  onclick="event.preventDefault(); alert('Page d√©tail √† impl√©menter')"
                >
                  Voir le produit
                </a>
              </div>
            </article>
          @endeach
        </div>
      </div>
    @else
      <!-- √âtat vide -->
      <div class="max-w-2xl mx-auto text-center py-12 sm:py-16">
        <div class="text-gray-300 mb-4 sm:mb-6">
          <svg class="w-16 h-16 sm:w-20 sm:h-20 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path>
          </svg>
        </div>
        <h3 class="text-xl sm:text-2xl font-semibold text-gray-600 mb-2 sm:mb-3">
          Aucun produit disponible
        </h3>
        <p class="text-gray-500 text-sm sm:text-base">
          Les produits seront bient√¥t ajout√©s par l'administrateur.
        </p>
        <a 
          href="/login" 
          class="inline-block mt-4 sm:mt-6 text-blue-600 hover:text-blue-800 text-sm sm:text-base"
        >
          Se connecter pour ajouter des produits ‚Üí
        </a>
      </div>
    @endif
  </main>

  <!-- FOOTER -->
  <footer class="mt-8 sm:mt-12 bg-white border-t py-6">
    <div class="max-w-7xl mx-auto px-4">
      <div class="text-center text-gray-500">
        <p class="text-sm sm:text-base">&copy; {{ new Date().getFullYear() }} ‚Äî Mileq Store.</p>
        <p class="text-xs sm:text-sm mt-1 text-gray-400">Tous les prix sont en dollars canadiens (CAD)</p>
        
        <!-- Contact info -->
        <div class="mt-4 flex flex-col sm:flex-row justify-center gap-4 text-xs sm:text-sm">
          <a href="mailto:contact@mileqstore.com" class="text-gray-400 hover:text-blue-600">
            contact@mileqstore.com
          </a>
          <span class="hidden sm:inline text-gray-300">‚Ä¢</span>
          <a href="tel:+1234567890" class="text-gray-400 hover:text-blue-600">
            +1 (234) 567-890
          </a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Script pour am√©liorer l'UX -->
  <script>
    // Am√©lioration de l'exp√©rience mobile
    document.addEventListener('DOMContentLoaded', function() {
      // D√©sactiver les contr√¥les vid√©o sur mobile pour √©viter le plein √©cran
      if (window.innerWidth < 640) {
        document.querySelectorAll('video').forEach(video => {
          video.removeAttribute('controls')
          video.addEventListener('click', function() {
            this.paused ? this.play() : this.pause()
          })
        })
      }
      
      // Smooth scroll pour les ancres
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault()
          const target = document.querySelector(this.getAttribute('href'))
          if (target) {
            target.scrollIntoView({ behavior: 'smooth' })
          }
        })
      })
    })
  </script>

</body>
</html>